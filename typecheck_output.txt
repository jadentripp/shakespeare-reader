$ tsc --noEmit
src/components/AppearancePanel.tsx(146,60): error TS2345: Argument of type 'number | undefined' is not assignable to parameter of type 'number'.
  Type 'undefined' is not assignable to type 'number'.
src/components/AppearancePanel.tsx(258,56): error TS2345: Argument of type 'number | undefined' is not assignable to parameter of type 'number'.
  Type 'undefined' is not assignable to type 'number'.
src/components/reader/ChatMessageList.tsx(1,10): error TS6133: 'Feather' is declared but its value is never read.
src/components/reader/ChatMessageList.tsx(1,19): error TS6133: 'Quote' is declared but its value is never read.
src/components/reader/ChatMessageList.tsx(8,1): error TS6133: 'Loader' is declared but its value is never read.
src/components/reader/ChatMessageList.tsx(9,19): error TS6133: 'MessageAction' is declared but its value is never read.
src/components/reader/ChatMessageList.tsx(9,34): error TS6133: 'MessageAvatar' is declared but its value is never read.
src/components/reader/ChatPanel.tsx(95,24): error TS2375: Type '{ children: string; className: string; onCitationClick: ((index: number, snippet?: string | undefined) => void) | undefined; }' is not assignable to type 'MarkdownProps' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'onCitationClick' are incompatible.
    Type '((index: number, snippet?: string | undefined) => void) | undefined' is not assignable to type '(index: number, snippet?: string | undefined) => void'.
      Type 'undefined' is not assignable to type '(index: number, snippet?: string | undefined) => void'.
src/components/reader/ChatSidebar.tsx(276,20): error TS2604: JSX element type 'Icon' does not have any construct or call signatures.
src/components/reader/ChatSidebar.tsx(276,20): error TS2786: 'Icon' cannot be used as a JSX component.
  Its type 'ForwardRefExoticComponent<Omit<LucideProps, "ref"> & RefAttributes<SVGSVGElement>> | undefined' is not a valid JSX element type.
    Type 'undefined' is not assignable to type 'ElementType'.
src/components/reader/ChatSidebar.tsx(284,10): error TS2375: Type '{ messages: LocalChatMessage[]; chatSending: boolean; onDeleteMessage: ((id: number) => void) | undefined; onCitationClick: ((index: number, snippet?: string | undefined) => void) | undefined; }' is not assignable to type 'ChatMessageListProps' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'onDeleteMessage' are incompatible.
    Type '((id: number) => void) | undefined' is not assignable to type '(id: number) => void'.
      Type 'undefined' is not assignable to type '(id: number) => void'.
src/components/reader/ContextTray.tsx(2,1): error TS6133: 'React' is declared but its value is never read.
src/components/reader/HighlightsSidebar.tsx(157,18): error TS2375: Type '{ highlights: Highlight[]; selectedHighlightId: number | null; onSelectHighlight: (id: number) => void; onDeleteHighlight: (id: number) => void; highlightPageMap: Record<number, number>; ... 5 more ...; attachedHighlightIds: number[]; }' is not assignable to type 'HighlightsListProps' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'onToggleContext' are incompatible.
    Type '((id: number) => void) | undefined' is not assignable to type '(id: number) => void'.
      Type 'undefined' is not assignable to type '(id: number) => void'.
src/components/reader/ReaderContent.tsx(11,1): error TS6133: 'cn' is declared but its value is never read.
src/components/reader/ReaderContent.tsx(140,12): error TS2375: Type '{ contextHint: string; messages: ChatMessage[]; prompts: ChatPrompt[]; chatInput: string; onChatInputChange: (input: string) => void; onPromptSelect: (input: string) => void; ... 24 more ...; onCitationClick: (citationId: number, snippet?: string | undefined) => void; }' is not assignable to type 'ChatSidebarProps' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'onNewChat' are incompatible.
    Type '(() => Promise<void>) | undefined' is not assignable to type '() => void'.
      Type 'undefined' is not assignable to type '() => void'.
src/components/reader/ReaderPane.tsx(29,3): error TS6133: 'readerWidth' is declared but its value is never read.
src/components/reader/ReaderToolbar.tsx(24,6): error TS2375: Type '{ title: string | undefined; showAppearance: boolean; onShowAppearanceChange: Dispatch<SetStateAction<boolean>>; fontFamily: string; lineHeight: number; ... 18 more ...; onTtsSettings: () => void; }' is not assignable to type 'ReaderTopBarProps' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'title' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/reader/TocPanel.tsx(82,48): error TS2532: Object is possibly 'undefined'.
src/components/reader/TocPanel.tsx(86,16): error TS18048: 'g' is possibly 'undefined'.
src/components/reader/TocPanel.tsx(87,18): error TS18048: 'g' is possibly 'undefined'.
src/components/reader/TocPanel.tsx(241,18): error TS2532: Object is possibly 'undefined'.
src/components/reader/TocPanel.tsx(242,13): error TS2322: Type 'TocEntry | undefined' is not assignable to type 'TocEntry'.
  Type 'undefined' is not assignable to type 'TocEntry'.
src/components/reader/TocPanel.tsx(243,23): error TS2532: Object is possibly 'undefined'.
src/components/reader/TocPanel.tsx(245,30): error TS2532: Object is possibly 'undefined'.
src/components/reader/TTSPanel.tsx(97,23): error TS2532: Object is possibly 'undefined'.
src/components/reader/TTSPanel.tsx(125,20): error TS2345: Argument of type 'number | undefined' is not assignable to parameter of type 'SetStateAction<number>'.
  Type 'undefined' is not assignable to type 'SetStateAction<number>'.
src/components/reader/TTSPanel.tsx(126,15): error TS2345: Argument of type 'number | undefined' is not assignable to parameter of type 'number'.
  Type 'undefined' is not assignable to type 'number'.
src/components/reader/TTSPanel.tsx(147,10): error TS2345: Argument of type 'number | undefined' is not assignable to parameter of type 'number'.
  Type 'undefined' is not assignable to type 'number'.
src/components/reader/TTSProgressBar.tsx(2,23): error TS6133: 'useEffect' is declared but its value is never read.
src/components/reader/TTSProgressBar.tsx(2,34): error TS6133: 'useRef' is declared but its value is never read.
src/components/reader/TTSProgressBar.tsx(2,42): error TS6133: 'useState' is declared but its value is never read.
src/components/three/BookMesh.tsx(67,22): error TS2532: Object is possibly 'undefined'.
src/components/three/BookMesh.tsx(67,22): error TS2722: Cannot invoke an object which is possibly 'undefined'.
src/components/three/BookMesh.tsx(353,47): error TS18048: 'colors' is possibly 'undefined'.
src/components/three/BookMesh.tsx(408,22): error TS18048: 'colors' is possibly 'undefined'.
src/components/three/BookMesh.tsx(415,22): error TS18048: 'colors' is possibly 'undefined'.
src/components/three/BookMesh.tsx(444,24): error TS18048: 'colors' is possibly 'undefined'.
src/components/three/BookMesh.tsx(452,22): error TS18048: 'colors' is possibly 'undefined'.
src/components/three/BookMesh.tsx(465,22): error TS18048: 'colors' is possibly 'undefined'.
src/components/three/BookMesh.tsx(466,26): error TS18048: 'colors' is possibly 'undefined'.
src/components/three/BookMesh.tsx(489,46): error TS18048: 'colors' is possibly 'undefined'.
src/components/three/BookMesh.tsx(493,46): error TS18048: 'colors' is possibly 'undefined'.
src/components/ui/loader.tsx(36,15): error TS2375: Type '{ size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ className?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'className' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/loader.tsx(38,15): error TS2375: Type '{ size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ className?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'className' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/loader.tsx(40,15): error TS2375: Type '{ size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ className?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'className' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/loader.tsx(42,15): error TS2375: Type '{ size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ className?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'className' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/loader.tsx(44,15): error TS2375: Type '{ size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ className?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'className' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/loader.tsx(46,15): error TS2375: Type '{ size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ className?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'className' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/loader.tsx(48,15): error TS2375: Type '{ size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ className?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'className' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/loader.tsx(50,15): error TS2375: Type '{ size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ className?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'className' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/loader.tsx(52,15): error TS2375: Type '{ size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ className?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'className' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/loader.tsx(54,15): error TS2375: Type '{ text: string | undefined; size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ text?: string; className?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'text' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/loader.tsx(56,15): error TS2375: Type '{ text: string | undefined; size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ text?: string; className?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'text' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/loader.tsx(58,15): error TS2375: Type '{ text: string | undefined; size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ className?: string; text?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'className' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/loader.tsx(60,15): error TS2375: Type '{ size: "sm" | "lg" | "md"; className: string | undefined; }' is not assignable to type '{ className?: string; size?: "sm" | "lg" | "md"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'className' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/markdown.tsx(44,18): error TS2322: Type 'string | undefined' is not assignable to type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/components/ui/markdown.tsx(49,5): error TS2578: Unused '@ts-expect-error' directive.
src/components/ui/markdown.tsx(68,8): error TS2375: Type '{ children: Element; className: string | undefined; }' is not assignable to type '{ children?: ReactNode; className?: string; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'className' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/components/ui/markdown.tsx(99,40): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/components/ui/markdown.tsx(100,52): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/components/ui/markdown.tsx(128,39): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/components/ui/markdown.tsx(173,40): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/components/ui/markdown.tsx(174,52): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/components/ui/markdown.tsx(201,39): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/components/ui/markdown.tsx(243,9): error TS2578: Unused '@ts-expect-error' directive.
src/components/ui/markdown.tsx(274,10): error TS2375: Type '{ key: string; content: string; components: Partial<Components>; onCitationClick: ((index: number, snippet?: string | undefined) => void) | undefined; }' is not assignable to type '{ content: string; components?: Partial<Components>; onCitationClick?: (index: number, snippet?: string | undefined) => void; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'onCitationClick' are incompatible.
    Type '((index: number, snippet?: string | undefined) => void) | undefined' is not assignable to type '(index: number, snippet?: string | undefined) => void'.
      Type 'undefined' is not assignable to type '(index: number, snippet?: string | undefined) => void'.
src/components/ui/message.tsx(29,21): error TS2375: Type '{ children: string; delayMs: number | undefined; }' is not assignable to type 'AvatarFallbackProps' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'delayMs' are incompatible.
    Type 'number | undefined' is not assignable to type 'number'.
      Type 'undefined' is not assignable to type 'number'.
src/components/ui/message.tsx(55,6): error TS2375: Type '{ children: string; id?: string; components?: Partial<Components>; accept?: string | undefined; acceptCharset?: string | undefined; action?: string | ((formData: FormData) => void | Promise<...>) | undefined; ... 377 more ...; onCitationClick: (((index: number, snippet?: string | undefined) => void) & ((index: numbe...' is not assignable to type 'MarkdownProps' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'onCitationClick' are incompatible.
    Type '(((index: number, snippet?: string | undefined) => void) & ((index: number, snippet?: string | undefined) => void)) | undefined' is not assignable to type '(index: number, snippet?: string | undefined) => void'.
      Type 'undefined' is not assignable to type '(index: number, snippet?: string | undefined) => void'.
src/components/ui/prompt-input.tsx(18,66): error TS2379: Argument of type '{ isLoading: false; value: string; setValue: () => void; maxHeight: number; onSubmit: undefined; disabled: false; textareaRef: React.RefObject<HTMLTextAreaElement | null>; }' is not assignable to parameter of type 'PromptInputContextType' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'onSubmit' are incompatible.
    Type 'undefined' is not assignable to type '() => void'.
src/components/ui/prompt-input.tsx(71,9): error TS2375: Type '{ isLoading: boolean; value: string; setValue: (value: string) => void; maxHeight: string | number; onSubmit: ((() => void) & React.FormEventHandler<HTMLDivElement>) | undefined; disabled: boolean; textareaRef: React.RefObject<...>; }' is not assignable to type 'PromptInputContextType' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'onSubmit' are incompatible.
    Type '((() => void) & FormEventHandler<HTMLDivElement>) | undefined' is not assignable to type '() => void'.
      Type 'undefined' is not assignable to type '() => void'.
src/components/ui/slider.tsx(20,6): error TS2375: Type '{ children: (Element | Element[])[]; name?: string; disabled?: boolean; orientation?: "horizontal" | "vertical" | undefined; dir?: Direction; step?: number; minStepsBetweenThumbs?: number; ... 286 more ...; className: string; }' is not assignable to type 'SliderProps' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'value' are incompatible.
    Type 'number[] | undefined' is not assignable to type 'number[]'.
      Type 'undefined' is not assignable to type 'number[]'.
src/hooks/library/useCatalogSearch.ts(70,46): error TS2532: Object is possibly 'undefined'.
src/lib/elevenlabs.ts(59,67): error TS2379: Argument of type '{ text: string; modelId: string; outputFormat: "mp3_44100_128"; voiceSettings: { stability: number; similarityBoost: number; style: number; useSpeakerBoost: boolean; } | undefined; }' is not assignable to parameter of type 'BodyTextToSpeechFull' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'voiceSettings' are incompatible.
    Type '{ stability: number; similarityBoost: number; style: number; useSpeakerBoost: boolean; } | undefined' is not assignable to type 'VoiceSettings'.
      Type 'undefined' is not assignable to type 'VoiceSettings'.
src/lib/elevenlabs.ts(96,81): error TS2379: Argument of type '{ text: string; modelId: string; voiceSettings: { stability: number; similarityBoost: number; style: number; useSpeakerBoost: boolean; } | undefined; }' is not assignable to parameter of type 'BodyTextToSpeechFullWithTimestamps' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'voiceSettings' are incompatible.
    Type '{ stability: number; similarityBoost: number; style: number; useSpeakerBoost: boolean; } | undefined' is not assignable to type 'VoiceSettings'.
      Type 'undefined' is not assignable to type 'VoiceSettings'.
src/lib/elevenlabs.ts(138,5): error TS6133: 'originalText' is declared but its value is never read.
src/lib/elevenlabs.ts(151,40): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/lib/elevenlabs.ts(198,39): error TS2532: Object is possibly 'undefined'.
src/lib/elevenlabs.ts(199,37): error TS2532: Object is possibly 'undefined'.
src/lib/elevenlabs.ts(200,33): error TS2769: No overload matches this call.
  Overload 1 of 2, '(o: {}): string[]', gave the following error.
    Argument of type 'Voice | undefined' is not assignable to parameter of type '{}'.
      Type 'undefined' is not assignable to type '{}'.
  Overload 2 of 2, '(o: object): string[]', gave the following error.
    Argument of type 'Voice | undefined' is not assignable to parameter of type 'object'.
      Type 'undefined' is not assignable to type 'object'.
src/lib/elevenlabs.ts(240,11): error TS6133: 'queue' is declared but its value is never read.
src/lib/elevenlabs.ts(333,26): error TS18048: 'w' is possibly 'undefined'.
src/lib/elevenlabs.ts(333,51): error TS18048: 'w' is possibly 'undefined'.
src/lib/elevenlabs.ts(339,24): error TS18048: 'w' is possibly 'undefined'.
src/lib/elevenlabs.ts(340,62): error TS2532: Object is possibly 'undefined'.
src/lib/elevenlabs.ts(353,59): error TS2345: Argument of type 'WordTiming | null | undefined' is not assignable to parameter of type 'WordTiming | null'.
  Type 'undefined' is not assignable to type 'WordTiming | null'.
src/lib/elevenlabs.ts(367,42): error TS2322: Type 'WordTiming | undefined' is not assignable to type 'WordTiming | null'.
  Type 'undefined' is not assignable to type 'WordTiming | null'.
src/lib/openai.ts(82,52): error TS2769: No overload matches this call.
  Overload 1 of 3, '(body: ResponseCreateParamsNonStreaming, options?: RequestOptions | undefined): APIPromise<Response>', gave the following error.
    Argument of type '{ model: string; input: any; reasoning: undefined; }' is not assignable to parameter of type 'ResponseCreateParamsNonStreaming' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
      Types of property 'reasoning' are incompatible.
        Type 'undefined' is not assignable to type 'Reasoning | null'.
  Overload 2 of 3, '(body: ResponseCreateParamsStreaming, options?: RequestOptions | undefined): APIPromise<Stream<ResponseStreamEvent>>', gave the following error.
    Argument of type '{ model: string; input: any; reasoning: undefined; }' is not assignable to parameter of type 'ResponseCreateParamsStreaming' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
      Property 'stream' is missing in type '{ model: string; input: any; reasoning: undefined; }' but required in type 'ResponseCreateParamsStreaming'.
  Overload 3 of 3, '(body: ResponseCreateParamsBase, options?: RequestOptions | undefined): APIPromise<Response | Stream<ResponseStreamEvent>>', gave the following error.
    Argument of type '{ model: string; input: any; reasoning: undefined; }' is not assignable to parameter of type 'ResponseCreateParamsBase' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
      Types of property 'reasoning' are incompatible.
        Type 'undefined' is not assignable to type 'Reasoning | null'.
src/lib/openai.ts(85,7): error TS2578: Unused '@ts-expect-error' directive.
src/lib/openai.ts(91,5): error TS2578: Unused '@ts-expect-error' directive.
src/lib/reader/citations.ts(112,7): error TS2375: Type '{ text: string; blockIndex: number | undefined; pageNumber: number; }' is not assignable to type 'CitationMapping' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'blockIndex' are incompatible.
    Type 'number | undefined' is not assignable to type 'number'.
      Type 'undefined' is not assignable to type 'number'.
src/lib/reader/citations.ts(142,25): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/lib/reader/hooks/useChat.ts(172,9): error TS2322: Type '{ id: number | undefined; text: string; note: string | undefined; } | null' is not assignable to type '{ id?: number; text: string; note?: string; } | null'.
  Type '{ id: number | undefined; text: string; note: string | undefined; }' is not assignable to type '{ id?: number; text: string; note?: string; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
    Types of property 'id' are incompatible.
      Type 'number | undefined' is not assignable to type 'number'.
        Type 'undefined' is not assignable to type 'number'.
src/lib/reader/hooks/useChat.ts(175,9): error TS2322: Type '{ id: number; text: string; note: string | undefined; }[]' is not assignable to type '{ id: number; text: string; note?: string; }[]'.
  Type '{ id: number; text: string; note: string | undefined; }' is not assignable to type '{ id: number; text: string; note?: string; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
    Types of property 'note' are incompatible.
      Type 'string | undefined' is not assignable to type 'string'.
        Type 'undefined' is not assignable to type 'string'.
src/lib/reader/hooks/useChat.ts(352,30): error TS2532: Object is possibly 'undefined'.
src/lib/reader/hooks/useChat.ts(353,44): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/lib/reader/hooks/useMobiReader.ts(321,11): error TS2375: Type '{ page: number | undefined; }' is not assignable to type '{ page?: number; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'page' are incompatible.
    Type 'number | undefined' is not assignable to type 'number'.
      Type 'undefined' is not assignable to type 'number'.
src/lib/reader/hooks/useModels.ts(31,27): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'SetStateAction<string>'.
  Type 'undefined' is not assignable to type 'SetStateAction<string>'.
src/lib/reader/hooks/useTTS.ts(2,23): error TS6133: 'EndReason' is declared but its value is never read.
src/lib/reader/links.ts(174,33): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/lib/reader/navigation.ts(6,21): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/lib/reader/toc.ts(102,30): error TS2532: Object is possibly 'undefined'.
src/lib/reader/toc.ts(108,30): error TS2532: Object is possibly 'undefined'.
src/lib/reader/toc.ts(112,10): error TS2532: Object is possibly 'undefined'.
src/lib/readerHtml.ts(67,36): error TS2532: Object is possibly 'undefined'.
src/lib/readerHtml.ts(68,38): error TS2532: Object is possibly 'undefined'.
src/lib/readerHtml.ts(69,46): error TS2532: Object is possibly 'undefined'.
src/lib/readerHtml.ts(70,44): error TS2532: Object is possibly 'undefined'.
src/lib/readerUtils.ts(148,26): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/lib/readerUtils.ts(162,18): error TS2532: Object is possibly 'undefined'.
src/lib/readerUtils.ts(179,24): error TS2532: Object is possibly 'undefined'.
src/lib/readerUtils.ts(181,29): error TS2538: Type 'undefined' cannot be used as an index type.
src/lib/readerUtils.ts(260,23): error TS18048: 'rect' is possibly 'undefined'.
src/lib/readerUtils.ts(261,24): error TS18048: 'rect' is possibly 'undefined'.
src/lib/readerUtils.ts(284,31): error TS2322: Type 'string | undefined' is not assignable to type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/lib/readerUtils.ts(303,33): error TS2322: Type 'string | undefined' is not assignable to type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/lib/readerUtils.ts(316,33): error TS2322: Type 'string | undefined' is not assignable to type 'string'.
  Type 'undefined' is not assignable to type 'string'.
src/lib/readerUtils.ts(355,22): error TS2532: Object is possibly 'undefined'.
src/lib/readerUtils.ts(357,27): error TS2345: Argument of type 'CharacterMapping | undefined' is not assignable to parameter of type 'CharacterMapping'.
  Type 'undefined' is not assignable to type 'CharacterMapping'.
src/lib/tauri/gutenberg.ts(42,25): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'string | URL'.
  Type 'undefined' is not assignable to type 'string | URL'.
src/lib/tauri/gutenberg.ts(160,26): error TS2532: Object is possibly 'undefined'.
src/lib/tauri/gutenberg.ts(160,26): error TS2722: Cannot invoke an object which is possibly 'undefined'.
src/lib/tauri/settings.ts(7,11): error TS6133: 'res' is declared but its value is never read.
src/routes/LibraryPage.tsx(25,5): error TS6133: 'searchFocused' is declared but its value is never read.
src/routes/LibraryPage.tsx(26,5): error TS6133: 'setSearchFocused' is declared but its value is never read.
src/routes/LibraryPage.tsx(27,5): error TS6133: 'recentSearches' is declared but its value is never read.
src/routes/LibraryPage.tsx(48,5): error TS6133: 'clearRecentSearches' is declared but its value is never read.
src/routes/SettingsPage.tsx(441,61): error TS2345: Argument of type 'number | undefined' is not assignable to parameter of type 'SetStateAction<number>'.
  Type 'undefined' is not assignable to type 'SetStateAction<number>'.
src/routes/SettingsPage.tsx(732,64): error TS2345: Argument of type 'number | undefined' is not assignable to parameter of type 'SetStateAction<number>'.
  Type 'undefined' is not assignable to type 'SetStateAction<number>'.
src/routes/SettingsPage.tsx(745,65): error TS2345: Argument of type 'number | undefined' is not assignable to parameter of type 'SetStateAction<number>'.
  Type 'undefined' is not assignable to type 'SetStateAction<number>'.
src/routes/ThreeDLibraryPage.tsx(813,18): error TS2375: Type '{ key: any; title: any; coverUrl: any; position: any; index: number; isSelected: boolean; onClick: () => void; height: any; width: number; depth: number; status: BookStatus; progress: number; ... 8 more ...; onFlyComplete: (() => void) | undefined; }' is not assignable to type 'BookMeshProps' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'initialOffset' are incompatible.
    Type '[number, number, number] | undefined' is not assignable to type '[number, number, number]'.
      Type 'undefined' is not assignable to type '[number, number, number]'.
src/routes/ThreeDLibraryPage.tsx(866,18): error TS2375: Type '{ key: any; title: any; coverUrl: any; position: any; index: number; isSelected: boolean; onClick: () => void; height: any; width: number; depth: number; status: BookStatus; progress: number; ... 7 more ...; onFlyComplete: (() => void) | undefined; }' is not assignable to type 'BookMeshProps' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'onFlyComplete' are incompatible.
    Type '(() => void) | undefined' is not assignable to type '() => void'.
      Type 'undefined' is not assignable to type '() => void'.
src/tests/AppearancePanel.test.tsx(4,1): error TS6133: 'React' is declared but its value is never read.
src/tests/AppearancePanel.test.tsx(39,52): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/AppearancePanel.test.tsx(40,43): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/AppearancePanel.test.tsx(41,47): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/AppearancePanel.test.tsx(42,47): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/BauhausHeader.test.tsx(3,1): error TS6133: 'React' is declared but its value is never read.
src/tests/BauhausHeader.test.tsx(30,13): error TS2322: Type '{ catalogQuery: string; setCatalogQuery: Mock<(...args: any[]) => any>; handleSearch: Mock<(...args: any[]) => any>; catalogQ: { isFetching: boolean; }; activeCatalog: { key: string; label: string; kind: string; }; catalogSearch: string; setCatalogKey: Mock<...>; searchInputRef: { ...; }; }' is not assignable to type 'BauhausHeaderProps'.
  Types of property 'activeCatalog' are incompatible.
    Type '{ key: string; label: string; kind: string; }' is missing the following properties from type 'CatalogEntry': description, catalogKey
src/tests/BauhausHeader.test.tsx(38,13): error TS2322: Type '{ catalogQuery: string; setCatalogQuery: Mock<(...args: any[]) => any>; handleSearch: Mock<(...args: any[]) => any>; catalogQ: { isFetching: boolean; }; activeCatalog: { key: string; label: string; kind: string; }; catalogSearch: string; setCatalogKey: Mock<...>; searchInputRef: { ...; }; }' is not assignable to type 'BauhausHeaderProps'.
  Types of property 'activeCatalog' are incompatible.
    Type '{ key: string; label: string; kind: string; }' is missing the following properties from type 'CatalogEntry': description, catalogKey
src/tests/BauhausHeader.test.tsx(46,13): error TS2322: Type '{ catalogQuery: string; setCatalogQuery: Mock<(...args: any[]) => any>; handleSearch: Mock<(...args: any[]) => any>; catalogQ: { isFetching: boolean; }; activeCatalog: { key: string; label: string; kind: string; }; catalogSearch: string; setCatalogKey: Mock<...>; searchInputRef: { ...; }; }' is not assignable to type 'BauhausHeaderProps'.
  Types of property 'activeCatalog' are incompatible.
    Type '{ key: string; label: string; kind: string; }' is missing the following properties from type 'CatalogEntry': description, catalogKey
src/tests/BauhausHeader.test.tsx(56,13): error TS2322: Type '{ catalogQuery: string; handleSearch: Mock<(...args: any[]) => any>; setCatalogQuery: Mock<(...args: any[]) => any>; catalogQ: { isFetching: boolean; }; activeCatalog: { key: string; label: string; kind: string; }; catalogSearch: string; setCatalogKey: Mock<...>; searchInputRef: { ...; }; }' is not assignable to type 'BauhausHeaderProps'.
  Types of property 'activeCatalog' are incompatible.
    Type '{ key: string; label: string; kind: string; }' is missing the following properties from type 'CatalogEntry': description, catalogKey
src/tests/BookCard.test.tsx(36,11): error TS6133: 'card' is declared but its value is never read.
src/tests/bookCategories.test.ts(265,50): error TS2769: No overload matches this call.
  Overload 1 of 2, '(expected: string | null): void', gave the following error.
    Argument of type 'string | undefined' is not assignable to parameter of type 'string | null'.
      Type 'undefined' is not assignable to type 'string | null'.
  Overload 2 of 2, '(expected: string | null): void', gave the following error.
    Argument of type 'string | undefined' is not assignable to parameter of type 'string | null'.
      Type 'undefined' is not assignable to type 'string | null'.
src/tests/bookCategories.test.ts(272,5): error TS2741: Property 'preconnect' is missing in type '(url: string | URL | Request) => Promise<Response>' but required in type 'typeof fetch'.
src/tests/bookCategories.test.ts(273,13): error TS6133: 'urlStr' is declared but its value is never read.
src/tests/bookCategories.test.ts(303,5): error TS2741: Property 'preconnect' is missing in type '() => Promise<Response>' but required in type 'typeof fetch'.
src/tests/BookMesh.test.tsx(1,32): error TS6133: 'mock' is declared but its value is never read.
src/tests/BookMesh.test.tsx(3,1): error TS6133: 'React' is declared but its value is never read.
src/tests/ChatSidebar.test.tsx(3,1): error TS6133: 'React' is declared but its value is never read.
src/tests/contextStaging.test.tsx(6,1): error TS6133: 'tauri' is declared but its value is never read.
src/tests/ContextTray.test.tsx(3,1): error TS6133: 'React' is declared but its value is never read.
src/tests/ContextTray.test.tsx(30,21): error TS6133: 'id' is declared but its value is never read.
src/tests/ContextTray.test.tsx(43,21): error TS2345: Argument of type 'HTMLElement | undefined' is not assignable to parameter of type 'Element | Node | Window | Document'.
  Type 'undefined' is not assignable to type 'Element | Node | Window | Document'.
src/tests/elevenlabs.test.ts(65,12): error TS2532: Object is possibly 'undefined'.
src/tests/fonts.test.ts(2,1): error TS2578: Unused '@ts-expect-error' directive.
src/tests/fonts.test.ts(4,1): error TS2578: Unused '@ts-expect-error' directive.
src/tests/fonts.test.ts(9,5): error TS2578: Unused '@ts-expect-error' directive.
src/tests/GlobalBauhausColors.test.tsx(2,18): error TS6133: 'screen' is declared but its value is never read.
src/tests/GlobalBauhausColors.test.tsx(3,1): error TS6133: 'React' is declared but its value is never read.
src/tests/GlobalBauhausColors.test.tsx(21,9): error TS2322: Type '{ highlight: any; noteDraft: string; onNoteDraftChange: () => void; onSaveNote: () => void; }' is not assignable to type 'IntrinsicAttributes & HighlightNoteProps'.
  Property 'highlight' does not exist on type 'IntrinsicAttributes & HighlightNoteProps'.
src/tests/library.test.tsx(7,1): error TS6133: 'tauri' is declared but its value is never read.
src/tests/library.test.tsx(88,41): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/library.test.tsx(98,43): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/library.test.tsx(103,55): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/LibraryGrid.test.tsx(3,1): error TS6133: 'React' is declared but its value is never read.
src/tests/openai.test.ts(12,19): error TS6133: 'opts' is declared but its value is never read.
src/tests/openai.test.ts(57,40): error TS2345: Argument of type '"saved-key"' is not assignable to parameter of type 'null'.
src/tests/openai.test.ts(80,40): error TS2345: Argument of type '"key"' is not assignable to parameter of type 'null'.
src/tests/openai.test.ts(82,40): error TS2345: Argument of type '{ data: { id: string; created: number; }[]; }' is not assignable to parameter of type 'never'.
src/tests/openai.test.ts(121,41): error TS2345: Argument of type '(key: string) => Promise<"gpt-5.2" | "api-key" | null>' is not assignable to parameter of type '() => Promise<null>'.
  Target signature provides too few arguments. Expected 1 or more, but got 0.
src/tests/openai.test.ts(127,44): error TS2345: Argument of type '{ output: ({ type: string; content: { type: string; text: string; }[]; } | { type: string; summary: string; })[]; }' is not assignable to parameter of type 'never'.
src/tests/readerHtml.test.ts(27,12): error TS2532: Object is possibly 'undefined'.
src/tests/readerHtml.test.ts(29,12): error TS2532: Object is possibly 'undefined'.
src/tests/readerHtml.test.ts(30,12): error TS2532: Object is possibly 'undefined'.
src/tests/readerHtml.test.ts(31,12): error TS2532: Object is possibly 'undefined'.
src/tests/ReaderTopBar.test.tsx(41,5): error TS2578: Unused '@ts-expect-error' directive.
src/tests/ReaderTopBar.test.tsx(43,24): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/ReaderTopBar.test.tsx(54,19): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/ReaderTopBar.test.tsx(70,25): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/ReadingRoom.test.tsx(3,1): error TS6133: 'React' is declared but its value is never read.
src/tests/SelectionTTS.test.tsx(4,1): error TS6133: 'React' is declared but its value is never read.
src/tests/SelectionTTS.test.tsx(39,24): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/SettingsAppearance.test.tsx(4,1): error TS6133: 'React' is declared but its value is never read.
src/tests/SettingsAppearance.test.tsx(47,45): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/SettingsPage.test.tsx(4,1): error TS6133: 'React' is declared but its value is never read.
src/tests/SettingsPage.test.tsx(53,59): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement | undefined>'.
src/tests/SettingsPage.test.tsx(59,52): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/SettingsPage.test.tsx(71,74): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/SettingsPage_voices.test.tsx(4,1): error TS6133: 'React' is declared but its value is never read.
src/tests/SettingsPage_voices.test.tsx(19,7): error TS6133: 'mockTestSpeech' is declared but its value is never read.
src/tests/SettingsPage_voices.test.tsx(77,56): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/SettingsPage_voices.test.tsx(84,27): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/SettingsSidebar.test.tsx(4,1): error TS6133: 'React' is declared but its value is never read.
src/tests/SettingsSidebar.test.tsx(18,45): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/SettingsSidebar.test.tsx(19,47): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/SettingsSidebar.test.tsx(20,46): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/SettingsSidebar.test.tsx(38,63): error TS2339: Property 'toHaveAttribute' does not exist on type 'Matchers<HTMLButtonElement | null>'.
src/tests/SettingsSidebar.test.tsx(39,65): error TS2339: Property 'toHaveAttribute' does not exist on type 'Matchers<HTMLButtonElement | null>'.
src/tests/SettingsSidebar.test.tsx(45,63): error TS2339: Property 'toHaveAttribute' does not exist on type 'Matchers<HTMLButtonElement | null>'.
src/tests/SettingsSidebar.test.tsx(49,65): error TS2339: Property 'toHaveAttribute' does not exist on type 'Matchers<HTMLButtonElement | null>'.
src/tests/setup.ts(3,1): error TS6133: 'cleanup' is declared but its value is never read.
src/tests/theme.test.ts(2,1): error TS2578: Unused '@ts-expect-error' directive.
src/tests/theme.test.ts(4,1): error TS2578: Unused '@ts-expect-error' directive.
src/tests/theme.test.ts(9,5): error TS2578: Unused '@ts-expect-error' directive.
src/tests/theme.test.ts(21,5): error TS2578: Unused '@ts-expect-error' directive.
src/tests/threadTitle.test.ts(14,19): error TS6133: 'opts' is declared but its value is never read.
src/tests/threadTitle.test.ts(51,42): error TS2345: Argument of type '{ output: { type: string; content: { type: string; text: string; }[]; }[]; }' is not assignable to parameter of type 'never'.
src/tests/threadTitle.test.ts(80,42): error TS2345: Argument of type '{ output: { type: string; content: { type: string; text: string; }[]; }[]; }' is not assignable to parameter of type 'never'.
src/tests/ThreeDLibraryPage.test.tsx(5,1): error TS6133: 'React' is declared but its value is never read.
src/tests/ThreeDLibraryPage.test.tsx(63,42): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/toc.test.ts(16,12): error TS2532: Object is possibly 'undefined'.
src/tests/toc.test.ts(17,12): error TS2532: Object is possibly 'undefined'.
src/tests/toc.test.ts(18,12): error TS2532: Object is possibly 'undefined'.
src/tests/toc.test.ts(18,12): error TS2532: Object is possibly 'undefined'.
src/tests/toc.test.ts(20,12): error TS2532: Object is possibly 'undefined'.
src/tests/toc.test.ts(21,12): error TS2532: Object is possibly 'undefined'.
src/tests/toc.test.ts(22,12): error TS2532: Object is possibly 'undefined'.
src/tests/toc.test.ts(22,12): error TS2532: Object is possibly 'undefined'.
src/tests/toc.test.ts(34,12): error TS2532: Object is possibly 'undefined'.
src/tests/toc.test.ts(35,12): error TS2532: Object is possibly 'undefined'.
src/tests/TTSPanel.test.tsx(4,1): error TS6133: 'React' is declared but its value is never read.
src/tests/TTSPanel.test.tsx(82,25): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLButtonElement | null | undefined>'.
src/tests/TTSPanel.test.tsx(86,28): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/TTSPanel.test.tsx(106,20): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/TTSPanel.test.tsx(111,38): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/TTSPanel.test.tsx(112,38): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/TTSPanel.test.tsx(119,47): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<unknown>'.
src/tests/TTSPanel.test.tsx(125,48): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/TTSPanel.test.tsx(135,25): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLButtonElement | null | undefined>'.
src/tests/TTSPanelPhase3.test.tsx(3,1): error TS6133: 'React' is declared but its value is never read.
src/tests/TTSPanelPhase3.test.tsx(51,12): error TS2532: Object is possibly 'undefined'.
src/tests/TTSProgressBar.test.tsx(37,48): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/TTSProgressBar.test.tsx(38,49): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/TTSProgressBar.test.tsx(44,47): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/TTSProgressBar.test.tsx(51,26): error TS2339: Property 'toHaveStyle' does not exist on type 'Matchers<HTMLElement>'.
src/tests/TTSProgressBar.test.tsx(67,27): error TS2339: Property 'toHaveAttribute' does not exist on type 'Matchers<HTMLElement>'.
src/tests/TTSProgressBar.test.tsx(68,27): error TS2339: Property 'toHaveAttribute' does not exist on type 'Matchers<HTMLElement>'.
src/tests/TTSProgressBar.test.tsx(74,48): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/TTSProgressBar.test.tsx(75,50): error TS2339: Property 'toBeInTheDocument' does not exist on type 'Matchers<HTMLElement>'.
src/tests/useLibrary.test.tsx(84,12): error TS2532: Object is possibly 'undefined'.
src/tests/useMobiReader.test.tsx(45,58): error TS2345: Argument of type 'null' is not assignable to parameter of type 'Book'.
src/tests/useMobiReader.test.tsx(46,62): error TS2345: Argument of type 'null' is not assignable to parameter of type 'string'.
src/tests/useMobiReader.test.tsx(47,67): error TS2345: Argument of type 'null' is not assignable to parameter of type 'string'.
src/tests/useTTS.test.ts(24,64): error TS2345: Argument of type '() => void' is not assignable to parameter of type '() => boolean'.
  Type 'void' is not assignable to type 'boolean'.
src/tests/useTTS.test.ts(47,9): error TS2322: Type 'Mock<() => {}>' is not assignable to type '() => Document | null'.
  Type '{}' is missing the following properties from type 'Document': URL, alinkColor, all, anchors, and 258 more.
src/tests/useTTS.test.ts(48,9): error TS2322: Type 'Mock<() => {}>' is not assignable to type '() => PageMetrics'.
  Type '{}' is missing the following properties from type 'PageMetrics': pageWidth, gap, stride, scrollLeft, rootRect
src/tests/useTTS.test.ts(58,9): error TS2322: Type 'Mock<() => {}>' is not assignable to type '() => Document | null'.
  Type '{}' is missing the following properties from type 'Document': URL, alinkColor, all, anchors, and 258 more.
src/tests/useTTS.test.ts(59,9): error TS2322: Type 'Mock<() => {}>' is not assignable to type '() => PageMetrics'.
  Type '{}' is missing the following properties from type 'PageMetrics': pageWidth, gap, stride, scrollLeft, rootRect
src/tests/useTTS_auto.test.ts(29,58): error TS2345: Argument of type '(cb: any) => () => void' is not assignable to parameter of type '(callback: (state: PlaybackState) => void) => () => boolean'.
  Call signature return types '() => void' and '() => boolean' are incompatible.
    Type 'void' is not assignable to type 'boolean'.
src/tests/useTTS_auto.test.ts(62,9): error TS2322: Type 'Mock<() => {}>' is not assignable to type '() => Document | null'.
  Type '{}' is missing the following properties from type 'Document': URL, alinkColor, all, anchors, and 258 more.
src/tests/useTTS_auto.test.ts(63,9): error TS2322: Type 'Mock<() => {}>' is not assignable to type '() => PageMetrics'.
  Type '{}' is missing the following properties from type 'PageMetrics': pageWidth, gap, stride, scrollLeft, rootRect
src/tests/useTTS_persistence.test.ts(28,64): error TS2345: Argument of type '() => void' is not assignable to parameter of type '() => boolean'.
  Type 'void' is not assignable to type 'boolean'.
src/tests/useTTS_persistence.test.ts(36,72): error TS2345: Argument of type '() => void' is not assignable to parameter of type '() => boolean'.
  Type 'void' is not assignable to type 'boolean'.
src/tests/useTTS_persistence.test.ts(61,9): error TS2322: Type 'Mock<() => {}>' is not assignable to type '() => Document | null'.
  Type '{}' is missing the following properties from type 'Document': URL, alinkColor, all, anchors, and 258 more.
src/tests/useTTS_persistence.test.ts(62,9): error TS2322: Type 'Mock<() => {}>' is not assignable to type '() => PageMetrics'.
  Type '{}' is missing the following properties from type 'PageMetrics': pageWidth, gap, stride, scrollLeft, rootRect
src/tests/useTTS_persistence.test.ts(79,9): error TS2322: Type 'Mock<() => {}>' is not assignable to type '() => Document | null'.
  Type '{}' is missing the following properties from type 'Document': URL, alinkColor, all, anchors, and 258 more.
src/tests/useTTS_persistence.test.ts(80,9): error TS2322: Type 'Mock<() => {}>' is not assignable to type '() => PageMetrics'.
  Type '{}' is missing the following properties from type 'PageMetrics': pageWidth, gap, stride, scrollLeft, rootRect
src/tests/useTTS_progress.test.ts(19,64): error TS2345: Argument of type '() => void' is not assignable to parameter of type '() => boolean'.
  Type 'void' is not assignable to type 'boolean'.
src/tests/useTTS_progress.test.ts(29,72): error TS2345: Argument of type '() => void' is not assignable to parameter of type '() => boolean'.
  Type 'void' is not assignable to type 'boolean'.
src/tests/useTTS_progress.test.ts(47,9): error TS2322: Type 'Mock<() => {}>' is not assignable to type '() => Document | null'.
  Type '{}' is missing the following properties from type 'Document': URL, alinkColor, all, anchors, and 258 more.
src/tests/useTTS_progress.test.ts(48,9): error TS2322: Type 'Mock<() => {}>' is not assignable to type '() => PageMetrics'.
  Type '{}' is missing the following properties from type 'PageMetrics': pageWidth, gap, stride, scrollLeft, rootRect
src/tests/webGPUScene.test.tsx(1,10): error TS6133: 'beforeAll' is declared but its value is never read.
