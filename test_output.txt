bun test v1.3.2 (b131639c)

src/tests/navigation.test.ts:
Global beforeEach running
(pass) cleanFootnoteContent > should remove return links like "back" [0.88ms]
Global beforeEach running
(pass) cleanFootnoteContent > should remove return links like "â†‘" [3.79ms]
Global beforeEach running
(pass) cleanFootnoteContent > should remove return links like "â†©" [0.24ms]
Global beforeEach running
(pass) cleanFootnoteContent > should strip [1] style prefixes from text nodes
Global beforeEach running
(pass) cleanFootnoteContent > should remove citation numbers like "[1]"
Global beforeEach running
(pass) cleanFootnoteContent > should keep other links [0.64ms]
Global beforeEach running
(pass) cleanFootnoteContent > should handle complex HTML [0.45ms]

src/tests/BookCard.test.tsx:
Global beforeEach running
(pass) BookCard > should render local book in grid variant by default [49.33ms]
Global beforeEach running
(pass) BookCard > should render catalog book in list variant [13.73ms]

src/tests/readerHtml.test.ts:
Global beforeEach running
(pass) processGutenbergContent > should inject data-block-index into meaningful blocks [4.31ms]
Global beforeEach running
(pass) processGutenbergContent > should extract metadata correctly [0.51ms]

src/tests/useTTS.test.ts:
Global beforeEach running
(pass) useTTS > should initialize with idle state [6.63ms]
Global beforeEach running
(pass) useTTS > should call audioPlayer.play with page text [3.87ms]

src/tests/useLibrary.test.tsx:
Global beforeEach running
(pass) useLibrary hook > should initialize with default values [9.19ms]
Global beforeEach running
(pass) useLibrary hook > should handle library search query changes [4.45ms]
Global beforeEach running
(pass) useLibrary hook > should filter books based on library query [58.28ms]
Global beforeEach running
(pass) useLibrary hook > should handle catalog search and update recent searches [3.53ms]
Global beforeEach running
(pass) useLibrary hook > should handle book deletion [3.63ms]

src/tests/ReaderTopBar.test.tsx:
Global beforeEach running
(pass) ReaderTopBar > renders the TTS play button when idle [14.99ms]
Global beforeEach running
(pass) ReaderTopBar > renders the pause button when playing [9.07ms]

src/tests/useChatSidebar.test.tsx:
Global beforeEach running
(pass) useChatSidebar hook > should initialize with default states [2.92ms]

src/tests/ThreeDLibraryPage.test.tsx:
THREE.WARNING: Multiple instances of Three.js being imported.
Global beforeEach running
<ambientLight /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
The tag <ambientLight> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.
<directionalLight /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
The tag <directionalLight> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.
React does not recognize the `castShadow` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `castshadow` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `shadow-mapSize-width` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `shadow-mapsize-width` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `shadow-mapSize-height` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `shadow-mapsize-height` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
<spotLight /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
The tag <spotLight> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.
<pointLight /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
The tag <pointLight> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.
<pointLight /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<cylinderGeometry /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
The tag <cylinderGeometry> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.
<meshStandardMaterial /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
The tag <meshStandardMaterial> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.
React does not recognize the `envMapIntensity` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `envmapintensity` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
The tag <mesh> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.
React does not recognize the `receiveShadow` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `receiveshadow` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
<cylinderGeometry /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<meshStandardMaterial /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<torusGeometry /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
The tag <torusGeometry> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.
<meshStandardMaterial /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<boxGeometry /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
The tag <boxGeometry> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.
<meshStandardMaterial /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
React does not recognize the `emissiveIntensity` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `emissiveintensity` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
The tag <group> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.
<boxGeometry /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<meshStandardMaterial /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<boxGeometry /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<meshStandardMaterial /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<boxGeometry /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<meshStandardMaterial /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<boxGeometry /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<meshStandardMaterial /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<boxGeometry /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<meshStandardMaterial /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<boxGeometry /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<meshStandardMaterial /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<boxGeometry /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<meshStandardMaterial /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
<pointLight /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.
(pass) ThreeDLibraryPage > should render the 3D scene with ReadingRoom elements [29.37ms]

src/tests/ReadingRoom.test.tsx:

# Unhandled error between tests
-------------------------------
23 | const DragManager: React.FC<{
24 |   draggedBook: any;
25 |   dragStartMouse: { x: number; y: number } | null;
26 |   onDragUpdate: (offset: [number, number, number], isOverDropZone: boolean, isOverTrash: boolean) => void;
27 | }> = ({ draggedBook, dragStartMouse, onDragUpdate }) => {
28 |   const { mouse } = useThree();
                         ^
TypeError: Cannot destructure property 'mouse' from null or undefined value
      at DragManager (/Users/jadentripp/Desktop/tests/reader/ai-reader/src/routes/ThreeDLibraryPage.tsx:28:21)
      at react_stack_bottom_frame (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at runWithFiberInDEV (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performSyncWorkOnRoot (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/react-dom/cjs/react-dom-client.development.js:18972:7)
-------------------------------

An error occurred in the <DragManager> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


src/tests/useMobiReader.test.tsx:
Global beforeEach running
(pass) useMobiReader hook > should initialize with default states [5.06ms]
Global beforeEach running
(pass) useMobiReader hook > should toggle columns [1.08ms]

src/tests/SettingsAppearance.test.tsx:
(skip) SettingsPage Appearance Section > (unnamed)
(skip) SettingsPage Appearance Section > renders the appearance section

src/tests/fonts.test.ts:
Global beforeEach running
(pass) Project Fonts > index.html should include Google Fonts links for EB Garamond and Inter [2.11ms]

src/tests/useTTS_auto.test.ts:
Global beforeEach running
45 |       onPageTurnNeeded: mockOnPageTurnNeeded,
46 |     }));
47 | 
48 |     // Start playing to set autoNext to true
49 |     await act(async () => {
50 |       await result.current.playCurrentPage();
                                ^
TypeError: result.current.playCurrentPage is not a function. (In 'result.current.playCurrentPage()', 'result.current.playCurrentPage' is undefined)
      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/src/tests/useTTS_auto.test.ts:50:28)
      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/src/tests/useTTS_auto.test.ts:49:15)
      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/@testing-library/react/dist/act-compat.js:47:24)
      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/react/cjs/react.development.js:814:22)
      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/@testing-library/react/dist/act-compat.js:46:25)
      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/src/tests/useTTS_auto.test.ts:49:11)
      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/src/tests/useTTS_auto.test.ts:40:82)
(fail) useTTS auto-advance > triggers onPageTurnNeeded when audio ends naturally and autoNext is true [2.23ms]

src/tests/SettingsSidebar.test.tsx:
Global beforeEach running
(pass) SettingsSidebar > renders all settings categories [6.22ms]
Global beforeEach running
(pass) SettingsSidebar > calls onTabChange when a category is clicked [5.90ms]
Global beforeEach running
(pass) SettingsSidebar > highlights the active tab [4.03ms]

src/tests/BookMesh.test.tsx:
Global beforeEach running
71 | // if an empty list of elements is returned
72 | function makeGetAllQuery(allQuery, getMissingError) {
73 |   return (container, ...args) => {
74 |     const els = allQuery(container, ...args);
75 |     if (!els.length) {
76 |       throw (0, _config.getConfig)().getElementError(getMissingError(container, ...args), container);
                                                                                                        ^
TestingLibraryElementError: Unable to find an element by: [data-testid="book-mesh-group"]

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mdata-testid[39m=[32m"book-mesh"[39m
    [36m/>[39m
  [36m</div>[39m
[36m</body>[39m
      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/@testing-library/dom/dist/query-helpers.js:76:100)
      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/@testing-library/dom/dist/query-helpers.js:52:17)
      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/src/tests/BookMesh.test.tsx:21:19)
(fail) BookMesh > should render the book mesh and its components [3.84ms]

src/tests/threeDLibrary.test.tsx:
(skip) ThreeDLibraryPage > should render the 3D Library placeholder

src/tests/LibraryGrid.test.tsx:
Global beforeEach running
(pass) LibraryGrid > should render children in grid variant [2.58ms]
Global beforeEach running
(pass) LibraryGrid > should render children in list variant [1.41ms]

src/tests/threadTitle.test.ts:
(skip) AI Thread Title Generation (TODO: Module mocking not yet supported in bun) > should generate a concise title from the first interaction
(skip) AI Thread Title Generation (TODO: Module mocking not yet supported in bun) > should clean up quotes from the generated title

src/tests/appearance.test.ts:
Global beforeEach running
 7 |     localStorage.clear();
 8 |   });
 9 | 
10 |   it("should return default values when no data in localStorage", () => {
11 |     const { result } = renderHook(() => useReaderAppearance("test-book"));
12 |     expect(result.current.fontFamily).toContain("EB Garamond");
                                           ^
error: expect(received).toContain(expected)

Expected to contain: "EB Garamond"
Received: "serif"

      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/src/tests/appearance.test.ts:12:39)
(fail) useReaderAppearance > should return default values when no data in localStorage [1.07ms]
Global beforeEach running
18 |     const { result } = renderHook(() => useReaderAppearance("test-book"));
19 | 
20 |     act(() => {
21 |       result.current.setFontFamily("sans-serif");
22 |     });
23 |     expect(result.current.fontFamily).toBe("sans-serif");
                                           ^
error: expect(received).toBe(expected)

Expected: "sans-serif"
Received: "serif"

      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/src/tests/appearance.test.ts:23:39)
(fail) useReaderAppearance > should persist changes to localStorage [0.48ms]
Global beforeEach running
32 |       lineHeight: 2.0,
33 |       margin: 100,
34 |     }));
35 | 
36 |     const { result } = renderHook(() => useReaderAppearance("test-book"));
37 |     expect(result.current.fontFamily).toBe("Georgia");
                                           ^
error: expect(received).toBe(expected)

Expected: "Georgia"
Received: "serif"

      at <anonymous> (/Users/jadentripp/Desktop/tests/reader/ai-reader/src/tests/appearance.test.ts:37:39)
(fail) useReaderAppearance > should load data from localStorage on initialization [0.70ms]

src/tests/SettingsPage_voices.test.tsx:
Global beforeEach running
[Settings] voiceId changed: 
[Settings] Initializing...
[Settings] openAiKeyStatus result: {
  has_env_key: false,
  has_saved_key: false,
}
[Settings] Loading saved voice ID: v1
[Settings] No key detected
[Settings] voiceId changed: v1
(pass) SettingsPage Voice Selection > renders the Voice selection dropdown [74.82ms]
Global beforeEach running
[Settings] voiceId changed: 
[Settings] Initializing...
[Settings] openAiKeyStatus result: {
  has_env_key: false,
  has_saved_key: false,
}
[Settings] Loading saved voice ID: v1
[Settings] No key detected
[Settings] voiceId changed: v1
(pass) SettingsPage Voice Selection > shows preview button when a voice with preview is selected [104.44ms]

src/tests/openai.test.ts:
(skip) OpenAI Service (TODO: Module mocking not yet supported in bun) > resolveApiKey > should resolve key from Tauri settings first
(skip) OpenAI Service (TODO: Module mocking not yet supported in bun) > resolveApiKey > should fallback to environment variables if no saved key
(skip) OpenAI Service (TODO: Module mocking not yet supported in bun) > resolveApiKey > should throw error if no key found
(skip) OpenAI Service (TODO: Module mocking not yet supported in bun) > listModels > should filter and sort gpt models correctly
(skip) OpenAI Service (TODO: Module mocking not yet supported in bun) > chat > should call openai.responses.create and format result

src/tests/elevenlabs.test.ts:
Global beforeEach running
[ElevenLabs] textToSpeech called for text: "Hello world..." with voiceId: v1
[ElevenLabs] textToSpeech conversion successful
(pass) ElevenLabsService > should be able to convert text to speech [1.97ms]
Global beforeEach running
[ElevenLabs] getVoices called
[ElevenLabs] getVoices successful, found 1 voices
[ElevenLabs] Sample voice object structure: {
  has_voice_id: true,
  has_voiceId: false,
  raw_keys: [ "voice_id", "name" ],
}
(pass) ElevenLabsService > should be able to list voices
Global beforeEach running
(pass) AudioPlayer > should initialize with idle state [1.04ms]
Global beforeEach running
[AudioPlayer] play requested for text length: 9
[AudioPlayer] Initializing AudioContext
[AudioPlayer] AudioContext state: suspended
[AudioPlayer] Resuming suspended AudioContext
[AudioPlayer] State transition: idle -> buffering
[AudioPlayer] Calling elevenLabsService.textToSpeech with voiceId: v1
[ElevenLabs] textToSpeech called for text: "Test text..." with voiceId: v1
[ElevenLabs] textToSpeech conversion successful
[AudioPlayer] Converting stream to buffer
[AudioPlayer] Reading stream
[AudioPlayer] Stream read complete, total chunks: 1, total length: 4
[AudioPlayer] Audio data received, size: 4 bytes
[AudioPlayer] Decoding audio data
[AudioPlayer] Audio decoded successfully, duration: 10.00s
[AudioPlayer] State transition: buffering -> idle
[AudioPlayer] Starting playback
[AudioPlayer] State transition: idle -> playing
(pass) AudioPlayer > should be able to play text [1.22ms]
Global beforeEach running
[AudioPlayer] play requested for text length: 9
[AudioPlayer] Initializing AudioContext
[AudioPlayer] AudioContext state: suspended
[AudioPlayer] Resuming suspended AudioContext
[AudioPlayer] State transition: idle -> buffering
[AudioPlayer] Resolved voiceId from database: fake-api-key
[AudioPlayer] Loading voice settings from database
[AudioPlayer] Settings loaded: {
  stability: 0.5,
  similarity_boost: 0.75,
  style: 0,
  use_speaker_boost: false,
}
[AudioPlayer] Calling elevenLabsService.textToSpeech with voiceId: fake-api-key
[ElevenLabs] textToSpeech called for text: "Test text..." with voiceId: fake-api-key
[ElevenLabs] textToSpeech conversion successful
[AudioPlayer] Converting stream to buffer
[AudioPlayer] Reading stream
[AudioPlayer] Stream read complete, total chunks: 1, total length: 4
[AudioPlayer] Audio data received, size: 4 bytes
[AudioPlayer] Decoding audio data
[AudioPlayer] Audio decoded successfully, duration: 10.00s
[AudioPlayer] State transition: buffering -> idle
[AudioPlayer] Starting playback
[AudioPlayer] State transition: idle -> playing
[AudioPlayer] Pause requested
[AudioPlayer] State transition: playing -> paused
[AudioPlayer] Resume requested
[AudioPlayer] State transition: paused -> playing
(pass) AudioPlayer > should be able to pause and resume [0.74ms]

src/tests/toc.test.ts:
Global beforeEach running
(pass) parseSceneLinksHierarchical > should group scenes under acts [1.32ms]
Global beforeEach running
(pass) parseSceneLinksHierarchical > should handle scenes before any act [0.79ms]

src/tests/libraryStateSharing.test.tsx:
Global beforeEach running
(pass) Library State Sharing > shares state between multiple components using the hook under the same provider [4.67ms]

src/tests/SettingsPage.test.tsx:
Global beforeEach running
[Settings] voiceId changed: 
[Settings] Initializing...
[Settings] openAiKeyStatus result: {
  has_env_key: false,
  has_saved_key: false,
}
[Settings] Loading saved voice ID: null
[Settings] No saved voice ID, will use default when voices load
[Settings] No key detected
(pass) SettingsPage > renders the ElevenLabs API key input [35.26ms]
Global beforeEach running
[Settings] voiceId changed: 
[Settings] Initializing...
[Settings] openAiKeyStatus result: {
  has_env_key: false,
  has_saved_key: false,
}
[Settings] Loading saved voice ID: null
[Settings] No saved voice ID, will use default when voices load
[Settings] No key detected
(pass) SettingsPage > renders the Connection Status section [34.31ms]
(skip) SettingsPage > shows the settings page content

src/tests/webGPUScene.test.tsx:
Global beforeEach running
(pass) WebGPUScene > should render the Canvas component [3.13ms]

src/tests/ReaderLayout.test.tsx:
Global beforeEach running
(pass) ReaderLayout > renders children [3.21ms]
Global beforeEach running
(pass) ReaderLayout > stores the column count on the root element [0.45ms]
Global beforeEach running
(pass) ReaderLayout > updates the column count when set to 2 [0.63ms]

src/tests/theme.test.ts:
Global beforeEach running
(pass) Global Theme Variables > should define shadcn theme tokens in index.css
Global beforeEach running
(pass) Global Theme Variables > should apply the new variables to global selectors

src/tests/AppearancePanel.test.tsx:
Global beforeEach running
(pass) AppearancePanel > renders correctly with default props [17.33ms]
Global beforeEach running
(pass) AppearancePanel > calls onFontFamilyChange when font selection changes [37.75ms]
Global beforeEach running
(pass) AppearancePanel > renders sliders for line height and margin [21.39ms]

src/tests/pollution.test.ts:
Global beforeEach running
(pass) Pollution Check > should set a value in localStorage [2.70ms]
Global beforeEach running
(pass) Pollution Check > should find localStorage empty in a fresh test
Global beforeEach running
(pass) Pollution Check > should add an element to the body [0.66ms]
Global beforeEach running
(pass) Pollution Check > should find the body empty in a fresh test

src/tests/library.test.tsx:
Global beforeEach running
(pass) LibraryPage > should display book title [13.99ms]
Global beforeEach running
(pass) LibraryPage > should display empty state when no books are found [8.06ms]

src/tests/SelectionTTS.test.tsx:
Global beforeEach running
(pass) ReaderPane Selection TTS > renders the Read button in the selection popover [9.13ms]
Global beforeEach running
(pass) ReaderPane Selection TTS > calls onReadAloud when the Read button is clicked [4.68ms]

11 tests skipped:
(skip) SettingsPage Appearance Section > (unnamed)
(skip) SettingsPage Appearance Section > renders the appearance section
(skip) ThreeDLibraryPage > should render the 3D Library placeholder
(skip) AI Thread Title Generation (TODO: Module mocking not yet supported in bun) > should generate a concise title from the first interaction
(skip) AI Thread Title Generation (TODO: Module mocking not yet supported in bun) > should clean up quotes from the generated title
(skip) OpenAI Service (TODO: Module mocking not yet supported in bun) > resolveApiKey > should resolve key from Tauri settings first
(skip) OpenAI Service (TODO: Module mocking not yet supported in bun) > resolveApiKey > should fallback to environment variables if no saved key
(skip) OpenAI Service (TODO: Module mocking not yet supported in bun) > resolveApiKey > should throw error if no key found
(skip) OpenAI Service (TODO: Module mocking not yet supported in bun) > listModels > should filter and sort gpt models correctly
(skip) OpenAI Service (TODO: Module mocking not yet supported in bun) > chat > should call openai.responses.create and format result
(skip) SettingsPage > shows the settings page content


5 tests failed:
(fail) useTTS auto-advance > triggers onPageTurnNeeded when audio ends naturally and autoNext is true [2.23ms]
(fail) BookMesh > should render the book mesh and its components [3.84ms]
(fail) useReaderAppearance > should return default values when no data in localStorage [1.07ms]
(fail) useReaderAppearance > should persist changes to localStorage [0.48ms]
(fail) useReaderAppearance > should load data from localStorage on initialization [0.70ms]

 59 pass
 11 skip
 5 fail
 1 error
 116 expect() calls
Ran 75 tests across 32 files. [2.55s]
